package disney

import (
   "bytes"
   "encoding/json"
   "io"
   "net/http"
   "net/url"
)

func (r *refresh_token) fetch() error {
   data, err := json.Marshal(map[string]any{
      "query": query_refresh_token,
      "operationName": "refreshToken",
      "variables": map[string]any{
         "input": map[string]string{
            "refreshToken": raw_refresh_token,
         },
      },
   })
   if err != nil {
      return err
   }
   var req http.Request
   req.Header = http.Header{}
   req.Method = "POST"
   req.URL = &url.URL{}
   req.URL.Host = "disney.api.edge.bamgrid.com"
   req.URL.Path = "/graph/v1/device/graphql"
   req.URL.Scheme = "https"
   req.Body = io.NopCloser(bytes.NewReader(data))
   req.Header.Set("Authorization", "Bearer ZGlzbmV5JmJyb3dzZXImMS4wLjA.Cu56AgSfBTDag5NiRA81oLHkDZfu5L3CKadnefEAY84")
   resp, err := http.DefaultClient.Do(&req)
   if err != nil {
      return err
   }
   defer resp.Body.Close()
   err = json.NewDecoder(resp.Body).Decode(r)
   if err != nil {
      return err
   }
   if len(r.Errors) >= 1 {
      return &r.Errors[0]
   }
   return nil
}

const query_refresh_token = `
mutation refreshToken($input: RefreshTokenInput!) {
   refreshToken(refreshToken: $input) {
      activeSession {
         sessionId
      }
   }
}
`

type refresh_token struct {
   Errors []Error
   Extensions struct {
      Sdk struct {
         Token struct {
            AccessToken string
         }
      }
   }
}

const raw_refresh_token = "eyJ6aXAiOiJERUYiLCJraWQiOiJLcTYtNW1Ia3BxOXdzLUtsSUUyaGJHYkRIZFduRjU3UjZHY1h6aFlvZi04IiwiY3R5IjoiSldUIiwiZW5jIjoiQzIwUCIsImFsZyI6ImRpciJ9..DHIbiZQgs0NhDVtU.HysWFmRG8Iw-C0asTM5XIl98Nxiw-W-XSDwW0CZyecHXw1L-2wwMjK5oPGlimqYP5C0BKjaMGUOyZwRRS9HhyHjpSrc8Dq3OYR6jPuKcmFOQnZifqNR--yCORS1nw_IZSkq2aJPw41cY_s3CZ7UB0H-Fu33y0DBmefN_kkSAqoqFdpPzMtoVPe3W-l9QAJcYvW4mSlUiu6NIQPNdYgn9h-IXK-g1Y2OV9nUXj4kgw-1lds6eGPbJ0x30jmY48rDHKObpcNX_irVFjzLDjiAkBFFy8-4dzkHUD-u3OPM1gqUqrfY_nCBN_GWAaUclEAvpeOPFptetEVR1c1GVR9yJKonZ_DXhYdjTIo28xtuitcqSRxhp4wr4pg5fcd4Zb89PMbR2WdJVABBz9PpR0tPCirTSJ65TFK9h4WwrsFAaR-qIkJFw7CmVd5m0OZUsKF11mD6aCruqb3Sb9DeWw4keTAySsRLHqRi_T4Tw9YRi0jMFRSAuSRwdpEM5psNQHbXTWp-P01Dm5VQwUGWoIs5-Vax8YzDJTsXWBCUscUYkRlYgx9GLXHT8MidbRaLYXpkCEZH3gDPIXBXhiGYMGW7JyPip7YPIzDsq0sRcHKlA-UsjDMV4-gM7yBB796fBM2EqtV_Y426gs1HMMGuHRdWzSf7URl4B8Bxf6BOBtylhDHrMQWE-Ulv4-FyfwHyFxFBTdqoCZCwYaKjpimNKWjnBkpKhJB-VZz5wyZKe6qaajE4LYBQlvPoXSHfD2rxYh6VcT7p9LgUg5IBRPNiNmn9lRBstKJAQudxj9kOZBR0ffW_uTfEqpPl4YbRBRfxEsIhwNddfnGfPrtgCtEdts0QO3K11AmXj8mv3lqX4klj-UI0i4xDaceUTyaKVMt1T375I6bTGzRySAILuY3N6J7qpi8gqfqx_NRA6Nbe7tf-C1GEcLotGbwrhFebQAMwEEJlYnw5ZwMVjdjCjiYi5RMYWkeRMDqXph1IAGHilbK2l5HRpUGxwJaU83lY_DKgKTdLCYLp5RzHfI96_7BApYgeSMTBB6l15cdZBlza8HaArrqi4DU7rCRhX8RY12mW0KPAS0w1kzefrBTjOvfWtcAOO_jgarHmbkj2U2Tt0c14ClGBZd3zw6P-Qejg-huCn2vXlLENs2kqLPx69QsZzXzDuWrVyJk0hm_DcWXV-YKhhaOqF1GuT0Z1fjoh6O0ieJ37EA1BXAhpjAAgq9P-ir32WePZkd-nOROjlDzxxu3q8agtHwyCDLOhw7kwQZ8SDSMLGU4I61Kb9Ks-1QPcfXptBE4nFcWE_atqbHF_fblGNysdsvZReefd29ValAuL2tZjl3MbnmOVoHZIj538SJjXHkge808_GWbNDgzoPc7DgG8yUUlTLimRj5kaqfPpolgiNxw13vsBy70W2rujO7vUfZ68hVmOdIruasE1aJZ07q_NMXXyRCiQtjFkkJIO12bxGP8XDqLij9N8RbtVpsC0k5KgsdG2AYVh-tVe3YZl1A-WPDjZmUCoSG6gIioGkGtqzCoc94pGV3DQIdZUmaqvpimKamGPfGl5PKSyUV_nc6Yv_5rb371WWiQipWVHp8DzRg4wjNUwoogq7Cg3Pt7Itdd4AeduoYoyayn9-5GEGfJiiccxYR7qAt5j0AGYwoHEu_KadKSCBbtk4JyGuBe20QennyOJ--FNQeA6bv0ho2mOO37ass9ZlWsgw-O-2RWxz77JgvYE7T1N2fzR-2RH_qi51XBDdQzMV86CS90xX1-9Rw9J9KvZy5jZZ77qyBa5jejmd7nGdKYtgO1dR7q2VHGLfzQSALRx4Hzhcik6ZGS1o-gfRA0tL9GtDzAP3WDuRpvzx1Ta57EMQirnnqdxiBfOQji6NUKPd6UfXkfcaH3NB0adiyc32n1sA6NLPSIbZo95LY0IuRTTGfyAxqurhyMbJsQZ-htPZlYIZjT4Qsw2lSDaRa4_QoBBg-ZPiqZh97WNrAJny8yYJ0ozCB_RmxGj74KJ6MYQKLUe2d7R9d1ORm_UquVYUCneX2DrWZSO_ofTNOvZDbl2nW0st9byOm9Q9CMi1mAGsU0r6yAJiMtbeZ9WB1ZxltjPDyZrQeC8QSSzR2-5LIw1DC1bA0AZiEPF-wqN9DHiTlZMP0XyZfRYluTT2wF6XO9kdvL5qmDXAAK09Z-xsg5bISEK2kNLIkQwC4WF0rc9ioWkICqoAWpaV0prEruBVtlDGHT6PM9_Fc98-lEpWxUGx553Sohq1p0YCyN23E6ZJ32FO2YOC5nAh8pz3f2FHfCsF5AZs8VLKWx2eehO7OidOM5Umk1fVL8Vo1Mw8JMcDDdQyXsc0ovLTFK3aoC0AGaMKB-VMMUk8RFfjvmLbNHlnQgNqqh_rcyw3yCdv5yeRJXtPktz_tQDnrV1x3PHqKuYtRw0qFFscM7VZm9N4UKz_OgldwjNgIlsYVuPQP40hBxGpQVHbQIXBMH8x4zbEufwQk9Tub2Fqc5Tvp2YmuD0WSJRfqDNHnRcmQEiKC-gstsWQve6oUIJCq3WG9ltRgaMl0gmpBipnS77tA67Wu-qq-0OwhKTrcASNnQkP_vlO99Oj-EZ6ld023iFDN5w7h23NyFeUk_-_znlKW-eS_RxSTlZmt4Osc8dTw6pJKMY625B9Bpu2z8XHhFCWjIGxfhs-vwuVj-iUpCXSrIO6o1C8GtQlrj33NzNO0VLUE7E80yAUerARjIzEl_8WeCSDJXFy_76itSUR2z2RYSO5rng_enAZajTpczrpGmkjUnWqLEen8ZRHCuTjJCwkRiikcMCqqtSfd2BwK0qAh5gWEC5nvhsNOuL2cRfJt5uBghTXv2MkThHdU7cmGwBt7Fs7oMmIpZM3-wEXirNTXqHkHfUklEdVO6xLaPp1pQXR751VAtTVE_D9Wec8lf2MIocUJRGPtXIUNsbCPjX1Q5qaYgkwjjpP8UjqiW_FPEYoJIgNfX6Q6DCj0FIxr0zzK5urXuRqBIMXnZ9iJXdTUpX4V7tKTX0-e1bQRexFKXKvbAnv7Km3bByJRr4bSkSCOFobsQ4g8blqDLV34KYeNAMQPm9qbQsCoAwTlVre6mTp7WTBYxTBhmuj5pmsyuKNNAC7ik6vVPfWxftC6YENWSjOsH2CHGuOex2FR-TSA9kEdsWuk4BynWyhyU4ePOSlm8Ekzw3U3tAdGPfIyrxKQc2Ke_nuqs8zk5atkPtZjlVk2AoLWFEl_qsumjKfjesYAV9xCVeLJ5Hd2L-bAC1Ek2c98871M3l0T1kZSAXYggHqFn0dwIW6LsqGBkKC2kDXlUzpS1Bcl-ANd49GTxh4LLamT64KG0TdryZqXxEm7qZ0MKz2v0NipBaIMJAh4Hu9uGYBgEnsfd_GW76otxued6tO49ZkoWBZKTccy2JQm0YS8hNJD8z1xZyg7-ruyK4kdubhU5SkG5aEOB4G8eelXNrdM9qJgYsDK1EJ_tbXi1SNu1EmXMmrO4xWK-vCnuF2-8VJn16X2huifdFNypI-8QL2IC0PnItAE00b4C9stcp9__h_abPgswt83bIcrA7zlz_R4Kzc8jJhPc2gh8FjE9kON4CC_ku1jMGHC85RSNZI5AFATyyWnb0kCPc9HJY29mE9uxwKd_dqUJOK_oP57GqIxwVzPGaaabnKmNDJvIYaxPnNVtTqMSlUBbJhNERTsVbvaUgaP-G3tp_qt2XgBECilzr4beUe5__fZp_swO5d77kkRwONFEldEeODWTgCTEc-RV1OVt58AqY-WBjbdHlrtZVGpHLmK189EVNuhLpid3aOlHd51KIwgDMNQ250lxzix4NDLT0nVidYBLmcOoYDOt8nwgRV6ABnR8LW5WcFWaUhnjUx53Hc5AIhmlGDLsG4gzYadYQoVujlVJDGA3mb6hTyIMYQ9LFsAWz_3XMDmqx1b0FMR_lQwR3yCvD_gZfHp_2_DQTzRtr0YovOzKAKjqrqWEJz3nEcbdb_Wznp_xZBdfVPae6Pwgt9l5QGYrZ1raanqvy6jrmc-LfbdH0p5RvJCqkYXHj83UtocS8rBAixTAjUXjVCkvnhmOgGdS-0DgR4jtvZFK9j7QZM7I4mJ4CG7A-7i7I5r3Rtuu8hPMGHK27O07CYF-gyOEMj6AIpZO5HXQ9ch6BxAGdfTnU7uXgsyNoazoJtfHvw1IbatBqmHNW2INkg6Sh9bbHfiWADumEsChM7w7s_1B4S9jexMtjPJ6uho5iGNc88cQoGgIgJUxMVW-QwuEOac34hNPZdYZYg0ajDJGhEtwEKOpJaJAEZSWwr1ozLOZxpApyshwFtJGNhk8SyV1J1fZIlBRWd0UL4mgl6senH-NOOXoFNC6eUqpLhxW3l1mRN1H7GEfn-UTcv3Kwj1ht3a_NS1u6JmzyNgA_tuB6T_KEOmdpktpYK8FKm2wB_Pfk30BOc6Y6AO_SZNyWLCUgYPYF5SzNuXjsYPXp2irPx_Gkerq8MKGjmHIoNMRr1oCj2_Rsn-32CgJeLDI3KfSuBnbYElKV9g_Lsd5YEggQseYFsNRwS3dxzm28Bnl40ahARkNsl0qk3jQy1QWQBPkObkJvq9mvpYx9MFV2kX426Q11Cu8bOdj5FERsQcyGf-sba8c8DFkUfFKcelF24q2amcEpG-7jv6ocsDUmIwWDpn8rm11mFOldT8tJ3jEoq1hUIkUMYEXVxTMGYFLcaGrfccANf8Z7byZnNyY9heauiKNxjDOVnAaEsDpP5tv7G08PoEZfp5GO9xSNsCvFzyxVLXgWESIpO8rghmqd2kvKcj8_GcQ3QDNPnzsX2xOjT2o518PR8AZTZ1oHtQh0tGZiwAtmUBtM_4ZTziD0McMPKQPl4Chs26FIoxdtIKEJ5ZYxRxOje4jMfuLsZrKjWTq0n2FnR6JRLgTa7Qiyf7UcVrF8mVQRN3m_km0w_DiwOKzYGxZRTfQM-z6coT4GN0hiCfAZtKmxdNwaLgXble9524O-ImCoLhUCN60yPGeUYqr4cvMMnE29llErA_nbH4wmIfh1nslde0eszoLx2XvZTLq1fkZipKGusX_08gw_RRI_-JE6WVYF9BDYg1IlbRVQyf9ItID16gT2VmmdiXg_NpuoFRr7nq39gmZL5MLqy185GV2cUzG3Ex658MMoChDjhaLy4dDJEURRhh1EOXI0Dtjn-U80_2rYfE7jjrfy3JkKxPTTRlVlPof2nc77vvpnA5bOG1eHcmtpyEvE8Wy1oJ7A5GAOa8kIAWNyWd9ejvU2Jk5Qta8rkmYmp4_RjufoMHputsEyYAmrtFB-H7GvsPPC_vgIMKGV_4sT73Xnaf0hsFxsawlqzU6f0KF9LSRMHfFcXIgCWY62yIZCNb5AImcGQeTLdmc45PwaOn8q5ZtgLDb1B4kNnsanJbwRqgy-sZhiSzNvjKMlM8ZC2RsVDENFvyfk3Ztx5nPKLtYuxaKh801EjJD4WQhP8yAExjRUT4SCllc3nC4N5N0rxjfPArwRYNyHGZmMbfgqG14Nbm2SuhSfrHn_3p66gWrLcy8pawOoMZkMworl6OegDZTMr9O3GFZjZeBU.UC4Efd85y8SKwZd8tK6sMw"
